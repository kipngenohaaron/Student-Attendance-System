{% extends 'hod_template/base_template.html' %}

{% block page_title %}
    Manage Staff
{% endblock page_title %}

{% block main_content %}
{% load static %}

<section class="content">
  <div class="container-fluid">

    <!-- Add Staff Button -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h4 class="text-primary font-weight-bold">
        <i class="fas fa-users"></i> Manage Staff
      </h4>
      <a class="btn btn-primary shadow-sm" href="{% url 'add_staff' %}">
        <i class="fas fa-user-plus"></i> Add Staff
      </a>
    </div>

    <!-- Alert Messages -->
    {% if messages %}
      <div class="col-12">
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show mt-2 shadow-sm" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Staff Table -->
    <div class="card border-0 shadow-sm rounded-3">
      <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
        <h5 class="card-title mb-0"><i class="fas fa-id-badge"></i> Staff Details</h5>
        <form class="form-inline">
          <div class="input-group input-group-sm">
            <input type="text" class="form-control" placeholder="Search staff...">
            <div class="input-group-append">
              <button class="btn btn-light" type="button"><i class="fas fa-search text-primary"></i></button>
            </div>
          </div>
        </form>
      </div>

      <div class="card-body table-responsive p-0">
        <table class="table table-hover table-striped align-middle mb-0">
          <thead class="thead-dark text-center">
            <tr>
              <th>ID</th>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Username</th>
              <th>Email</th>
              <th>Address</th>
              <th>Last Login</th>
              <th>Date Joined</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody class="text-center">
            {% for staff in staffs %}
              <tr>
                <td>{{ staff.admin.id }}</td>
                <td>{{ staff.admin.first_name }}</td>
                <td>{{ staff.admin.last_name }}</td>
                <td>{{ staff.admin.username }}</td>
                <td>{{ staff.admin.email }}</td>
                <td>{{ staff.address }}</td>
                <td>{{ staff.admin.last_login|date:"Y-m-d H:i" }}</td>
                <td>{{ staff.admin.date_joined|date:"Y-m-d" }}</td>
                <td>
                  <a href="{% url 'edit_staff' staff.admin.id %}" class="btn btn-sm btn-success">
                    <i class="fas fa-edit"></i> Edit
                  </a>
                  <a href="{% url 'delete_staff' staff.admin.id %}" class="btn btn-sm btn-danger" 
                     onclick="return confirm('Are you sure you want to delete this staff member?');">
                    <i class="fas fa-trash-alt"></i> Delete
                  </a>
                </td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="9" class="text-muted py-3">No staff records found.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

  </div><!-- /.container-fluid -->
</section>
{% endblock main_content %}
